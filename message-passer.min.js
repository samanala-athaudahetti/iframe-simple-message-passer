function messagePasser(){this.events=[],this.eventsNames=[],this.postMessage=function(e,t){window.parent.postMessage({action:e,data:t},"*")},this.registerEvent=function(e,t){-1===this.eventsNames.indexOf(e)&&(this.events.push({action:e,callback:t}),this.eventsNames.push(e))},this.listen=function(){if(void 0!==this.events){var events=this.events,eventMethod=window.addEventListener?"addEventListener":"attachEvent",eventer=window[eventMethod],messageEvent="attachEvent"==eventMethod?"onmessage":"message";eventer(messageEvent,function(e){events.forEach(function(element){e.data.action===element.action&&eval(element.callback)(e.data.data)})},!1)}}}
